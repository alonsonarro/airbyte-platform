ARG VERSION=dev-8c5398d930
ARG NGINX_IMAGE=nginx:alpine
FROM ${NGINX_IMAGE}

ARG ENV_NAME=dev
ARG CLOUD
ARG API_URL
ARG CLOUD_API_URL
ARG FIREBASE_API_KEY
ARG FIREBASE_AUTH_DOMAIN
ARG FIREBASE_AUTH_EMULATOR_HOST
ARG REACT_APP_DATADOG_APPLICATION_ID
ARG REACT_APP_DATADOG_CLIENT_TOKEN
ARG REACT_APP_DATADOG_SITE
ARG REACT_APP_DATADOG_SERVICE
ARG REACT_APP_INTERCOM_APP_ID
ARG REACT_APP_WEBAPP_TAG
ARG SEGMENT_TOKEN
ARG LAUNCHDARKLY_KEY

ENV AIRBYTE_VERSION $VERSION
ENV CLOUD $CLOUD
ENV API_URL $API_URL
ENV CLOUD_API_URL $CLOUD_API_URL
ENV FIREBASE_API_KEY $FIREBASE_API_KEY
ENV FIREBASE_AUTH_DOMAIN $FIREBASE_AUTH_DOMAIN
ENV FIREBASE_AUTH_EMULATOR_HOST $FIREBASE_AUTH_EMULATOR_HOST
ENV REACT_APP_DATADOG_APPLICATION_ID $REACT_APP_DATADOG_APPLICATION_ID
ENV REACT_APP_DATADOG_CLIENT_TOKEN $REACT_APP_DATADOG_CLIENT_TOKEN
ENV REACT_APP_DATADOG_SITE $REACT_APP_DATADOG_SITE
ENV REACT_APP_DATADOG_SERVICE $REACT_APP_DATADOG_SERVICE
ENV REACT_APP_INTERCOM_APP_ID $REACT_APP_INTERCOM_APP_ID
ENV REACT_APP_WEBAPP_TAG $REACT_APP_WEBAPP_TAG
ENV SEGMENT_TOKEN $SEGMENT_TOKEN
ENV LAUNCHDARKLY_KEY $LAUNCHDARKLY_KEY

COPY build/app /usr/share/nginx/html
COPY nginx/default.conf.template /etc/nginx/templates/default.conf.template
